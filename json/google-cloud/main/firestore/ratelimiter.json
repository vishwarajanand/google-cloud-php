{"id":"firestore\/ratelimiter","type":"","title":"Google\\Cloud\\Firestore\\RateLimiter","name":"RateLimiter","description":"<p>A helper that uses the Token Bucket algorithm to rate limit the number of\noperations that can be made in a second.<\/p>\n<p>Before a given request containing a number of operations can proceed,\nRateLimiter determines doing so stays under the provided rate limits. It can\nalso determine how much time is required before a request can be made.<\/p>\n<p>RateLimiter can also implement a gradually increasing rate limit. This is\nused to enforce the 500\/50\/5 rule\n(<a href=\"https:\/\/cloud.google.com\/firestore\/docs\/best-practices#ramping_up_traffic\">https:\/\/cloud.google.com\/firestore\/docs\/best-practices#ramping_up_traffic<\/a>).<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Firestore\/src\/RateLimiter.php#L85","description":"<p>Constructor.<\/p>","examples":[],"resources":[],"params":[{"name":"initialCapacity","description":"<p>Initial maximum number of operations per second.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"multiplier","description":"<p>Rate by which to increase the capacity.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.float.php\" target=\"_blank\">float<\/a>"],"optional":false,"nullable":null},{"name":"multiplierMillis","description":"<p>How often the capacity should increase in\nmilliseconds.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"maximumRate","description":"<p>Maximum number of allowed operations per second.\nThe number of tokens added per second will never exceed this number.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"startTimeMillis","description":"<p>The starting time in epoch milliseconds\nthat the rate limit is based on.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[]},{"id":"tryMakeRequest","type":"instance","name":"tryMakeRequest","source":"Firestore\/src\/RateLimiter.php#L113","description":"<p>Tries to make the number of operations. Returns true if the request\nsucceeded and false otherwise.<\/p>","examples":[],"resources":[],"params":[{"name":"numOperations","description":"<p>The number of operations to request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"requestTimeMillis","description":"<p>The time used to calculate the number of\navailable tokens.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"description":"<p>Used for testing the limiter.<\/p>"}]},{"id":"getNextRequestDelayMs","type":"instance","name":"getNextRequestDelayMs","source":"Firestore\/src\/RateLimiter.php#L137","description":"<p>Returns the number of ms needed to make a request with the provided number\nof operations.<\/p>\n<p>Returns 0 if the request can be made with the existing capacity.\nReturns -1 if the request is not possible with the current capacity.<\/p>","examples":[],"resources":[],"params":[{"name":"numOperations","description":"<p>The number of operations to request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"requestTimeMillis","description":"<p>The time used to calculate the number of\navailable tokens.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"description":""}]},{"id":"calculateCapacity","type":"instance","name":"calculateCapacity","source":"Firestore\/src\/RateLimiter.php#L164","description":"<p>Calculates the maximum capacity based on the provided date.<\/p>\n<p>This method is marked public only for testing.<\/p>","examples":[],"resources":[],"params":[{"name":"requestTimeMillis","description":"<p>The time used to calculate the number of\navailable tokens.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"description":""}]}]}